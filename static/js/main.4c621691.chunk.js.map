{"version":3,"sources":["components/SelectVideo/SelectVideo.js","components/VideoPlayer/VideoPlayer.js","components/Actions/Actions.js","hooks/useKeyPress.js","components/Timecodes/Timecodes.js","components/App/App.js","index.js"],"names":["SelectVideo","selectVideo","type","accept","onChange","getCurrentPercent","time","duration","toFixed","VideoPlayer","timecodes","url","innerRef","lineBackgrounds","React","useMemo","current","getState","player","map","timecode","startPercent","start","endPercent","end","join","size","ref","src","autoHide","seconds","order","className","Actions","toggleRecord","isRecording","recordPress","targetKey","useState","keyPressed","setKeyPressed","downHandler","useCallback","key","upHandler","useEffect","document","addEventListener","removeEventListener","useKeyPress","title","icon","onClick","formatteTime","padZero","num","toString","padStart","hours","Math","floor","minutes","Timecodes","removeTimecode","dataSource","renderItem","id","Item","Meta","description","App","video","setVideo","playerRef","useRef","startRecordTime","undefined","currentTime","setTimecodes","oldTimecodes","Date","now","setIsRecording","pause","play","newTimecodes","filter","event","URL","createObjectURL","target","files","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.4c621691.chunk.js","sourcesContent":["import React from \"react\";\n\nconst SelectVideo = ({ selectVideo }) => {\n  return (\n    <input\n      type=\"file\"\n      accept=\"video/mp4,video/x-m4v,video/*\"\n      onChange={selectVideo}\n    />\n  );\n};\n\nexport default SelectVideo;\n","import React from \"react\";\nimport {\n  Player,\n  ControlBar,\n  ReplayControl,\n  ForwardControl,\n  ProgressControl\n} from \"video-react\";\nimport Style from \"style-it\";\nimport { Card } from \"antd\";\nimport \"antd/es/card/style/css\";\n\nimport \"video-react/dist/video-react.css\";\nimport \"./VideoPlayer.css\";\n\nconst getCurrentPercent = (time, duration) => {\n  const percent = (time / duration) * 100;\n  return percent.toFixed(4);\n};\n\nconst VideoPlayer = ({ timecodes, url, innerRef }) => {\n  const lineBackgrounds = React.useMemo(() => {\n    if (!innerRef.current) {\n      return \"none\";\n    }\n    const { player } = innerRef.current.getState();\n    const duration = player.duration;\n    const opacityBackground = \"rgba(0, 0, 0, 0)\";\n    const coloredBackground = \"rgba(255, 0, 0, 0.5)\";\n    return timecodes\n      .map(timecode => {\n        const startPercent = `${getCurrentPercent(timecode.start, duration)}%`;\n        const endPercent = `${getCurrentPercent(timecode.end, duration)}%`;\n        return `linear-gradient(to right,${opacityBackground} 0%,${opacityBackground} ${startPercent},${coloredBackground} ${startPercent},${coloredBackground} ${endPercent},${opacityBackground} ${endPercent},${opacityBackground} 100%)`;\n      })\n      .join(\",\");\n  }, [timecodes, innerRef]);\n\n  return (\n    <Card size=\"small\">\n      <Style>\n        {`.video-player__progress .video-react-load-progress:after {\n          background: ${lineBackgrounds};\n        }`}\n      </Style>\n      <Player ref={innerRef}>\n        <source src={url} />\n        <ControlBar autoHide={false}>\n          <ReplayControl seconds={5} order={2.1} />\n          <ForwardControl seconds={5} order={3.1} />\n          <ProgressControl className=\"video-player__progress\" order={5.1} />\n        </ControlBar>\n      </Player>\n    </Card>\n  );\n};\n\nexport default VideoPlayer;\n","import React from \"react\";\nimport { Card, Button } from \"antd\";\nimport \"antd/es/card/style/css\";\nimport \"antd/es/button/style/css\";\n\nimport { useKeyPress } from \"../../hooks/useKeyPress\";\n\nconst Actions = ({ toggleRecord, isRecording }) => {\n  const handleRecord = () => {\n    toggleRecord();\n  };\n\n  const recordPress = useKeyPress(\"Enter\");\n  React.useEffect(() => {\n    if (recordPress) {\n      toggleRecord();\n    }\n  }, [recordPress, toggleRecord]);\n\n  return (\n    <Card size=\"small\" title=\"Actions\">\n      <Button\n        type=\"danger\"\n        icon={isRecording ? \"pause-circle\" : \"play-circle\"}\n        onClick={handleRecord}\n      >\n        Record\n      </Button>\n    </Card>\n  );\n};\n\nexport default Actions;\n","import React from \"react\";\n\nfunction useKeyPress(targetKey) {\n  const [keyPressed, setKeyPressed] = React.useState(false);\n\n  const downHandler = React.useCallback(\n    ({ key }) => {\n      if (key === targetKey) {\n        setKeyPressed(true);\n      }\n    },\n    [targetKey]\n  );\n\n  const upHandler = React.useCallback(\n    ({ key }) => {\n      if (key === targetKey) {\n        setKeyPressed(false);\n      }\n    },\n    [targetKey]\n  );\n\n  React.useEffect(() => {\n    document.addEventListener(\"keydown\", downHandler);\n    document.addEventListener(\"keyup\", upHandler);\n    return () => {\n      document.removeEventListener(\"keydown\", downHandler);\n      document.removeEventListener(\"keyup\", upHandler);\n    };\n  }, [downHandler, upHandler]);\n\n  return keyPressed;\n}\n\nexport { useKeyPress };\n","import React from \"react\";\nimport { Card, List, Button } from \"antd\";\nimport \"antd/es/card/style/css\";\nimport \"antd/es/list/style/css\";\nimport \"antd/es/button/style/css\";\n\nconst formatteTime = time => {\n  const padZero = num => num.toString().padStart(2, \"0\");\n\n  const hours = Math.floor(time / 3600);\n  const minutes = Math.floor((time - hours * 3600) / 60);\n  const seconds = Math.floor(time - hours * 3600 - minutes * 60);\n\n  return `${hours ? `${hours}:` : \"\"}${padZero(minutes)}:${padZero(seconds)}`;\n};\n\nconst Timecodes = ({ timecodes, removeTimecode }) => {\n  const renderTimecode = ({ id, start, end }) => {\n    return (\n      <List.Item key={id}>\n        <List.Item.Meta\n          description={`${formatteTime(start)} - ${formatteTime(end)}`}\n        ></List.Item.Meta>\n        <Button\n          type=\"link\"\n          size=\"small\"\n          icon=\"close-circle\"\n          onClick={removeTimecode(id)}\n        />\n      </List.Item>\n    );\n  };\n\n  return (\n    <Card size=\"small\" title=\"Timecodes\">\n      <List size=\"small\" dataSource={timecodes} renderItem={renderTimecode} />\n    </Card>\n  );\n};\n\nexport default Timecodes;\n","import React from \"react\";\nimport \"./App.css\";\n\nimport SelectVideo from \"../SelectVideo\";\nimport VideoPlayer from \"../VideoPlayer\";\nimport Actions from \"../Actions\";\nimport Timecodes from \"../Timecodes\";\n\nfunction App() {\n  const [video, setVideo] = React.useState();\n  const selectVideo = event => {\n    setVideo(URL.createObjectURL(event.target.files[0]));\n  };\n\n  const playerRef = React.useRef(null);\n\n  const startRecordTime = React.useRef(undefined);\n  const toggleRecord = React.useCallback(() => {\n    const { player } = playerRef.current.getState();\n    const currentTime = player.currentTime;\n    if (typeof startRecordTime.current !== \"undefined\") {\n      setTimecodes(oldTimecodes => [\n        ...oldTimecodes,\n        {\n          id: Date.now().toString(),\n          start: startRecordTime.current,\n          end: currentTime\n        }\n      ]);\n      startRecordTime.current = undefined;\n      setIsRecording(false);\n      playerRef.current.pause();\n    } else {\n      startRecordTime.current = currentTime;\n      setIsRecording(true);\n      playerRef.current.play();\n    }\n  }, []);\n\n  const [timecodes, setTimecodes] = React.useState([]);\n  const removeTimecode = id => () => {\n    const newTimecodes = timecodes.filter(timecode => timecode.id !== id);\n    setTimecodes(newTimecodes);\n  };\n\n  const [isRecording, setIsRecording] = React.useState(false);\n\n  return (\n    <div className=\"app\">\n      {video ? (\n        <div className=\"app__container\">\n          <div className=\"app__video\">\n            <VideoPlayer\n              timecodes={timecodes}\n              url={video}\n              innerRef={playerRef}\n            />\n          </div>\n          <div className=\"app__actions\">\n            <Actions toggleRecord={toggleRecord} isRecording={isRecording} />\n          </div>\n          <div className=\"app_timecodes\">\n            <Timecodes timecodes={timecodes} removeTimecode={removeTimecode} />\n          </div>\n        </div>\n      ) : (\n        <div className=\"app__select-file\">\n          <SelectVideo selectVideo={selectVideo} />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}